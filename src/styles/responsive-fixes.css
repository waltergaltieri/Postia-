/* ===== RESPONSIVE FIXES ===== */
/* Task 6.1: Solucionar problemas en dispositivos mÃ³viles */

/* ===== MOBILE VIEWPORT AND OVERFLOW FIXES ===== */

/* Prevent horizontal scrolling on all screen sizes */
html, body {
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
}

/* Fix viewport units on mobile browsers */
:root {
  --vh: 1vh;
  --vw: 1vw;
}

/* Mobile viewport height fix for iOS Safari */
@supports (-webkit-touch-callout: none) {
  :root {
    --vh: calc(var(--vh, 1vh) * 100);
  }
}

/* ===== RESPONSIVE CONTAINER SYSTEM ===== */

/* Base container with proper overflow handling */
.responsive-container {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  padding: 0 1rem;
  box-sizing: border-box;
}

/* Responsive breakpoint containers */
@media (min-width: 640px) {
  .responsive-container {
    max-width: 640px;
    padding: 0 1.5rem;
  }
}

@media (min-width: 768px) {
  .responsive-container {
    max-width: 768px;
    padding: 0 2rem;
  }
}

@media (min-width: 1024px) {
  .responsive-container {
    max-width: 1024px;
  }
}

@media (min-width: 1280px) {
  .responsive-container {
    max-width: 1280px;
  }
}

@media (min-width: 1536px) {
  .responsive-container {
    max-width: 1536px;
  }
}

/* ===== RESPONSIVE TEXT SCALING ===== */

/* Fluid typography that maintains legibility without zoom */
.responsive-text-xs {
  font-size: clamp(0.75rem, 2vw, 0.875rem);
  line-height: 1.4;
}

.responsive-text-sm {
  font-size: clamp(0.875rem, 2.5vw, 1rem);
  line-height: 1.5;
}

.responsive-text-base {
  font-size: clamp(1rem, 3vw, 1.125rem);
  line-height: 1.6;
}

.responsive-text-lg {
  font-size: clamp(1.125rem, 3.5vw, 1.25rem);
  line-height: 1.6;
}

.responsive-text-xl {
  font-size: clamp(1.25rem, 4vw, 1.5rem);
  line-height: 1.5;
}

.responsive-text-2xl {
  font-size: clamp(1.5rem, 5vw, 2rem);
  line-height: 1.4;
}

.responsive-text-3xl {
  font-size: clamp(1.875rem, 6vw, 2.5rem);
  line-height: 1.3;
}

/* ===== HORIZONTAL SCROLL CONTAINERS ===== */

/* Base horizontal scroll container */
.horizontal-scroll {
  display: flex;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--muted)) transparent;
  gap: 1rem;
  padding: 0.5rem 0;
}

/* Hide scrollbar on mobile for cleaner look */
@media (max-width: 768px) {
  .horizontal-scroll {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  
  .horizontal-scroll::-webkit-scrollbar {
    display: none;
  }
}

/* Horizontal scroll items */
.horizontal-scroll-item {
  flex: 0 0 auto;
  min-width: 0;
}

/* Table horizontal scroll wrapper */
.table-scroll-wrapper {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: 0.5rem;
  border: 1px solid hsl(var(--border));
}

.table-scroll-wrapper table {
  min-width: 100%;
  width: max-content;
}

/* Card grid horizontal scroll on mobile */
.card-grid-scroll {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(280px, 1fr);
  gap: 1rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding: 0.5rem 0;
  scroll-snap-type: x mandatory;
}

.card-grid-scroll > * {
  scroll-snap-align: start;
}

@media (min-width: 768px) {
  .card-grid-scroll {
    grid-auto-flow: row;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    overflow-x: visible;
  }
}

/* ===== MOBILE-SPECIFIC LAYOUT FIXES ===== */

/* Mobile content padding */
@media (max-width: 768px) {
  .mobile-content-padding {
    padding: 1rem;
  }
  
  .mobile-content-padding-sm {
    padding: 0.75rem;
  }
  
  .mobile-content-padding-lg {
    padding: 1.5rem;
  }
}

/* Mobile form improvements */
@media (max-width: 768px) {
  .mobile-form {
    width: 100%;
  }
  
  .mobile-form input,
  .mobile-form textarea,
  .mobile-form select {
    font-size: 16px; /* Prevents zoom on iOS */
    width: 100%;
    min-height: 44px;
    padding: 0.75rem;
    border-radius: 0.5rem;
  }
  
  .mobile-form button {
    width: 100%;
    min-height: 48px;
    font-size: 16px;
    padding: 0.75rem 1rem;
  }
}

/* Mobile navigation fixes */
@media (max-width: 768px) {
  .mobile-nav-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .mobile-header-safe {
    padding-top: env(safe-area-inset-top);
  }
}

/* ===== RESPONSIVE IMAGES AND MEDIA ===== */

/* Responsive images */
.responsive-image {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Responsive video containers */
.responsive-video {
  position: relative;
  width: 100%;
  height: 0;
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
  overflow: hidden;
}

.responsive-video iframe,
.responsive-video video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* ===== MOBILE MODAL AND POPUP FIXES ===== */

/* Mobile modal base styles */
@media (max-width: 768px) {
  .mobile-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 50;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding: 0;
  }
  
  .mobile-modal-content {
    width: 100%;
    max-height: 90vh;
    background: hsl(var(--background));
    border-radius: 1rem 1rem 0 0;
    overflow: hidden;
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .mobile-modal-content.open {
    transform: translateY(0);
  }
  
  .mobile-modal-header {
    padding: 1rem;
    padding-top: calc(1rem + env(safe-area-inset-top));
    border-bottom: 1px solid hsl(var(--border));
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  .mobile-modal-body {
    padding: 1rem;
    overflow-y: auto;
    max-height: calc(90vh - 120px);
  }
  
  .mobile-modal-footer {
    padding: 1rem;
    padding-bottom: calc(1rem + env(safe-area-inset-bottom));
    border-top: 1px solid hsl(var(--border));
    background: hsl(var(--muted) / 0.5);
  }
}

/* Mobile dropdown fixes */
@media (max-width: 768px) {
  .mobile-dropdown {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: hsl(var(--background));
    border-radius: 1rem 1rem 0 0;
    box-shadow: 0 -4px 6px -1px rgb(0 0 0 / 0.1);
    z-index: 50;
    max-height: 60vh;
    overflow-y: auto;
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .mobile-dropdown-item {
    padding: 1rem;
    border-bottom: 1px solid hsl(var(--border));
    min-height: 48px;
    display: flex;
    align-items: center;
  }
  
  .mobile-dropdown-item:last-child {
    border-bottom: none;
  }
}

/* ===== RESPONSIVE GRID SYSTEMS ===== */

/* Mobile-first responsive grid */
.responsive-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .responsive-grid-sm-2 {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 768px) {
  .responsive-grid-md-2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .responsive-grid-md-3 {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (min-width: 1024px) {
  .responsive-grid-lg-3 {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .responsive-grid-lg-4 {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* Auto-fit responsive grid */
.responsive-grid-auto {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}

@media (max-width: 640px) {
  .responsive-grid-auto {
    grid-template-columns: 1fr;
  }
}

/* ===== MOBILE TOUCH OPTIMIZATIONS ===== */

/* Touch-friendly button sizes */
@media (max-width: 768px) {
  .touch-button {
    min-height: 48px;
    min-width: 48px;
    padding: 0.75rem 1rem;
    font-size: 16px;
  }
  
  .touch-button-sm {
    min-height: 44px;
    min-width: 44px;
    padding: 0.5rem 0.75rem;
    font-size: 14px;
  }
  
  .touch-button-lg {
    min-height: 56px;
    min-width: 56px;
    padding: 1rem 1.5rem;
    font-size: 18px;
  }
}

/* Touch-friendly form controls */
@media (max-width: 768px) {
  .touch-input {
    min-height: 48px;
    padding: 0.75rem;
    font-size: 16px;
    border-radius: 0.5rem;
  }
  
  .touch-select {
    min-height: 48px;
    padding: 0.75rem;
    font-size: 16px;
    border-radius: 0.5rem;
  }
  
  .touch-checkbox,
  .touch-radio {
    min-height: 20px;
    min-width: 20px;
    margin: 0.5rem;
  }
}

/* ===== RESPONSIVE SPACING SYSTEM ===== */

/* Mobile spacing adjustments */
@media (max-width: 768px) {
  .mobile-space-y-2 > * + * {
    margin-top: 0.5rem;
  }
  
  .mobile-space-y-4 > * + * {
    margin-top: 1rem;
  }
  
  .mobile-space-y-6 > * + * {
    margin-top: 1.5rem;
  }
  
  .mobile-space-x-2 > * + * {
    margin-left: 0.5rem;
  }
  
  .mobile-space-x-4 > * + * {
    margin-left: 1rem;
  }
}

/* ===== RESPONSIVE UTILITIES ===== */

/* Hide/show elements based on screen size */
.mobile-only {
  display: block;
}

.desktop-only {
  display: none;
}

@media (min-width: 768px) {
  .mobile-only {
    display: none;
  }
  
  .desktop-only {
    display: block;
  }
}

/* Responsive text alignment */
.text-center-mobile {
  text-align: center;
}

@media (min-width: 768px) {
  .text-left-desktop {
    text-align: left;
  }
  
  .text-center-desktop {
    text-align: center;
  }
  
  .text-right-desktop {
    text-align: right;
  }
}

/* ===== ACCESSIBILITY IMPROVEMENTS FOR MOBILE ===== */

/* Enhanced focus states for touch devices */
@media (max-width: 768px) {
  .mobile-focus:focus-visible {
    outline: 3px solid hsl(var(--ring));
    outline-offset: 2px;
    border-radius: 0.5rem;
  }
  
  /* Larger tap targets for better accessibility */
  .mobile-tap-target {
    min-height: 48px;
    min-width: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/* Optimize animations for mobile */
@media (max-width: 768px) {
  .mobile-optimized {
    will-change: transform;
    transform: translateZ(0);
  }
  
  /* Reduce motion on mobile for better performance */
  @media (prefers-reduced-motion: reduce) {
    .mobile-optimized {
      animation: none;
      transition: none;
    }
  }
}

/* ===== PRINT STYLES ===== */

@media print {
  .responsive-container {
    max-width: none;
    padding: 0;
  }
  
  .horizontal-scroll {
    overflow: visible;
    display: block;
  }
  
  .mobile-only,
  .desktop-only {
    display: block;
  }
  
  .table-scroll-wrapper {
    overflow: visible;
    border: none;
  }
}